import{u as K,d as D,r as u,j as e,R as _}from"./index-BpdBFQQS.js";import{F as G}from"./Footer-CowGUUib.js";import{c as O}from"./createLucideIcon-D4oJ_o-y.js";import{C as F}from"./chevron-right-IFfJSZPU.js";import{X as V}from"./x-PgglTxAF.js";import"./map-pin-CXwquIrr.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=O("Armchair",[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z",key:"1e01m0"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=O("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),L=7e3,P=5e3,A=7e4,M=10,C={vip:{rows:[["A-1","A-2","A-3","A-4","A-5","A-6","A-7","A-8"],["B-1","B-2","B-3","B-4","B-5","B-6","B-7","B-8"],["C-1","C-2","C-3","C-4","C-5","C-6","C-7","C-8"],["D-1","D-2","D-3","D-4","D-5","D-6","D-7","D-8"],["E-1","E-2","E-3","E-4","E-5","E-6","E-7","E-8"]],price:L},generalTop:{rows:[["F-1","F-2","F-3","F-4","F-5","F-6","F-7","F-8"],["G-1","G-2","G-3","G-4","G-5","G-6","G-7","G-8"],["H-1","H-2","H-3","H-4","H-5","H-6","H-7",null],["I-1","I-2","I-3","I-4","I-5","I-6","I-7",null]],price:P},generalBottom:{rows:[["J-1","J-2","J-3","J-4","J-5","J-6","J-7",null],["K-1","K-2","K-3","K-4","K-5","K-6","K-7","K-8"],["L-1","L-2","L-3","L-4","L-5","L-6","L-7","L-8"],["M-1","M-2","M-3","M-4","M-5","M-6","M-7","M-8"],["N-1","N-2","N-3","N-4","N-5","N-6","N-7","N-8"],["O-1","O-2","O-3","O-4","O-5","O-6","O-7","O-8"],["P-1","P-2",null,null,null,null,"P-3","P-4"]]}},I=new Set(["A-1","A-2","B-1","B-2","B-3","C-6","C-7","C-8","D-8","E-1","H-1","H-3","H-5","H-7","I-2","I-4","I-6","J-2","J-4","J-6","k-1","K-3","K-5","K-7","L-2","L-4","L-6","L-8","M-1","M-3","M-5","M-7","N-2","N-4","N-6","N-8","O-1","O-3","O-5","O-7"]),J={A:"vip",B:"vip",C:"vip",D:"vip",E:"vip",F:"general",G:"general",H:"general",I:"general",J:"general",K:"general",L:"general",M:"general",N:"general",O:"general",P:"general"},R=a=>J[(a||"X").charAt(0).toUpperCase()]||"general",f=a=>`${Number(a||0).toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2})} LKR`,$=a=>Object.entries(a).flatMap(([l,r])=>{if(l.startsWith("__"))return[];const i=R(l),n=i==="vip"?L:P;return r.map(m=>({id:`${l}-${m+1}`,tableId:l,seatNo:m+1,category:i,price:n}))}),z=({label:a,status:l,onClick:r})=>{const i="flex items-center justify-center rounded-full font-bold text-[10px] sm:text-xs md:text-sm text-white shadow-md h-9 w-9 xs:h-10 xs:w-10 sm:h-12 sm:w-12 md:h-14 md:w-14 transition-transform",n={vip:"bg-green-600 hover:bg-green-500 cursor-pointer hover:scale-110",general:"bg-blue-600 hover:bg-blue-500 cursor-pointer hover:scale-110",partial:"bg-yellow-600 hover:bg-yellow-500 cursor-pointer hover:scale-110",full:"bg-red-700 cursor-not-allowed",locked:"bg-gray-700 cursor-not-allowed opacity-60"},m=l==="full"||l==="locked";return e.jsx("div",{className:`${i} ${n[l]}`,onClick:m?void 0:r,role:"button","aria-label":`Table ${a}`,title:l==="locked"?"Reserved":"",children:a})},q=({table:a,bookedSeats:l,onClose:r,onConfirm:i})=>{const[n,m]=u.useState([]),o=h=>l.includes(h)?null:m(p=>p.includes(h)?p.filter(g=>g!==h):[...p,h]),j=()=>{i(a.id,n),r()},s=typeof window<"u"&&window.innerWidth<640,x=s?92:112,N=s?236:288,S=s?36:40;return e.jsx("div",{className:"fixed inset-0 z-[60] grid place-items-center bg-black/70 p-3 sm:p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-teal-500/30 bg-gray-800 p-4 sm:p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl font-bold text-white",children:["Select Seats for ",e.jsx("span",{className:"text-teal-400",children:a.id})]}),e.jsx("button",{onClick:r,className:"rounded-md p-1 text-gray-400 hover:text-white","aria-label":"Close",children:e.jsx(V,{size:22})})]}),e.jsxs("div",{className:"mb-3 text-center text-gray-300",children:[e.jsx("p",{children:a.type==="vip"?"VIP Table":"General Table"}),e.jsxs("p",{className:"font-semibold text-amber-400",children:["LKR ",a.price.toLocaleString()," per seat"]})]}),e.jsx("div",{className:"mb-5 flex h-60 sm:h-72 items-center justify-center",children:e.jsxs("div",{className:"relative",style:{width:N,height:N},children:[e.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-full border-2 border-dashed border-gray-600",style:{width:s?92:112,height:s?92:112},children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-gray-500",children:"TABLE"})}),Array.from({length:M}).map((h,p)=>{const g=p/M*2*Math.PI-Math.PI/2,y=N/2+x*Math.cos(g)-S/2,b=N/2+x*Math.sin(g)-S/2,w=l.includes(p),E=n.includes(p);let t="absolute flex flex-col items-center transition-transform text-gray-400 hover:text-teal-300";return w&&(t="absolute flex flex-col items-center text-red-600 cursor-not-allowed"),E&&(t+=" text-teal-400 scale-110"),e.jsxs("button",{style:{left:y,top:b},className:t,onClick:()=>o(p),type:"button",children:[e.jsx(H,{size:s?26:32}),e.jsx("span",{className:"mt-1 text-[11px] sm:text-xs font-semibold",children:p+1})]},p)})]})}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2 sm:gap-4",children:[e.jsx("button",{onClick:r,className:"rounded-lg bg-gray-700 px-4 py-2 text-gray-300 hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{onClick:j,disabled:!n.length,className:"rounded-lg bg-teal-600 px-5 py-2 font-semibold text-white hover:bg-teal-500 disabled:bg-gray-600",children:["Book ",n.length||""," Seat",n.length!==1?"s":""]})]})]})})};function U({bookedSeats:a,onContinue:l}){const r=[{key:"general",label:"General",price:P},{key:"vip",label:"VIP",price:L}],i=u.useMemo(()=>Object.entries(a).filter(([s])=>!s.startsWith("__")).map(([s,x])=>({id:s,qty:x.length,cat:R(s)})),[a]),n=u.useMemo(()=>i.reduce((s,x)=>(s[x.cat]=(s[x.cat]||0)+x.qty,s),{general:0,vip:0}),[i]),m=r.map(s=>({...s,qty:n[s.key]||0,amount:(n[s.key]||0)*s.price})),o=m.reduce((s,x)=>s+x.amount,0),j=m.some(s=>s.qty>0);return e.jsxs("section",{className:"mx-auto mt-6 w-full max-w-4xl rounded-2xl border border-white/10 bg-gray-900/70 p-4 shadow-sm sm:p-6",children:[e.jsxs("div",{className:"hidden grid-cols-12 gap-3 rounded-lg bg-white/5 px-3 py-2 text-xs text-gray-300 sm:grid",children:[e.jsx("div",{className:"col-span-5",children:"Category"}),e.jsx("div",{className:"col-span-2",children:"Price"}),e.jsx("div",{className:"col-span-2",children:"No. of Tickets"}),e.jsx("div",{className:"col-span-3 text-right",children:"Amount"})]}),e.jsx("div",{className:"mt-1 divide-y divide-white/10 rounded-lg bg-white/5",children:m.map(s=>e.jsxs("div",{className:"grid grid-cols-12 items-center gap-3 px-3 py-2 text-sm",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:s.key==="vip"?"#41D17E":"#4DB2FF"}}),e.jsx("span",{className:"font-medium text-teal-50",children:s.label})]}),e.jsx("div",{className:"mt-1 text-xs text-gray-400 sm:hidden",children:f(s.price)})]}),e.jsx("div",{className:"col-span-2 hidden text-gray-300 sm:block",children:f(s.price)}),e.jsx("div",{className:"col-span-6 text-gray-300 sm:col-span-2",children:s.qty}),e.jsx("div",{className:"col-span-6 text-right font-semibold text-gray-100 sm:col-span-3",children:f(s.amount)})]},s.key))}),e.jsxs("div",{className:"mt-3 grid grid-cols-12 gap-3 px-3 text-sm font-bold",children:[e.jsx("div",{className:"col-span-12 sm:col-span-9 text-teal-100",children:"Total"}),e.jsx("div",{className:"col-span-12 text-right text-amber-300 sm:col-span-3",children:f(o)})]}),e.jsxs("div",{className:"mt-5 hidden items-center justify-center gap-3 sm:flex",children:[e.jsx("button",{className:"rounded-xl border border-white/10 bg-white/5 px-5 py-2 text-sm font-semibold text-teal-100 hover:bg-white/10",onClick:()=>window.history.back(),children:"â€¹ Back"}),e.jsxs("button",{className:"rounded-xl bg-amber-300 px-6 py-2 text-sm font-bold text-gray-900 hover:bg-amber-200 disabled:opacity-60",onClick:l,disabled:!j,children:["Continue ",e.jsx(F,{className:"ml-1 inline h-4 w-4"})]})]})]})}function W({tablesSelectedCount:a,onContinue:l}){const r=a,i=r*A,n=r>0;return e.jsxs("section",{className:"mx-auto mt-6 w-full max-w-4xl rounded-2xl border border-white/10 bg-gray-900/70 p-4 shadow-sm sm:p-6",children:[e.jsxs("div",{className:"hidden grid-cols-12 gap-3 rounded-lg bg-white/5 px-3 py-2 text-xs text-gray-300 sm:grid",children:[e.jsx("div",{className:"col-span-5",children:"Category"}),e.jsx("div",{className:"col-span-2",children:"Price"}),e.jsx("div",{className:"col-span-2",children:"No. of Tables"}),e.jsx("div",{className:"col-span-3 text-right",children:"Amount"})]}),e.jsx("div",{className:"mt-1 divide-y divide-white/10 rounded-lg bg-white/5",children:e.jsxs("div",{className:"grid grid-cols-12 items-center gap-3 px-3 py-2 text-sm",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:"#41D17E"}}),e.jsx("span",{className:"font-medium text-teal-50",children:"VIP Table Offer"})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-400 sm:hidden",children:[f(A)," / table"]})]}),e.jsx("div",{className:"col-span-2 hidden text-gray-300 sm:block",children:f(A)}),e.jsx("div",{className:"col-span-6 text-gray-300 sm:col-span-2",children:r}),e.jsx("div",{className:"col-span-6 text-right font-semibold text-gray-100 sm:col-span-3",children:f(i)})]})}),e.jsxs("div",{className:"mt-3 grid grid-cols-12 gap-3 px-3 text-sm font-bold",children:[e.jsx("div",{className:"col-span-12 sm:col-span-9 text-teal-100",children:"Total"}),e.jsx("div",{className:"col-span-12 text-right text-amber-300 sm:col-span-3",children:f(i)})]}),e.jsxs("div",{className:"mt-5 hidden items-center justify-center gap-3 sm:flex",children:[e.jsx("button",{className:"rounded-xl border border-white/10 bg-white/5 px-5 py-2 text-sm font-semibold text-teal-100 hover:bg-white/10",onClick:()=>window.history.back(),children:"â€¹ Back"}),e.jsxs("button",{className:"rounded-xl bg-amber-300 px-6 py-2 text-sm font-bold text-gray-900 hover:bg-amber-200 disabled:opacity-60",onClick:l,disabled:!n,children:["Continue ",e.jsx(F,{className:"ml-1 inline h-4 w-4"})]})]})]})}function X({totalUnits:a,label:l,onContinue:r,disabled:i}){return e.jsx("div",{className:"sm:hidden fixed inset-x-0 bottom-0 z-40 border-t border-white/10 bg-gray-900/90 backdrop-blur",children:e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center gap-3 px-3 py-2",children:[e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsxs("div",{className:"font-semibold text-teal-100",children:[a," ",l]}),e.jsx("div",{className:"text-[11px] text-teal-200/70",children:"Tap a table to add/remove"})]}),e.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-bold ${i?"bg-gray-700 text-teal-300/60":"bg-amber-300 text-gray-900 hover:bg-amber-200"}`,disabled:i,onClick:r,children:"Continue"})]})})}function ae(){var E;const a=K(),l=D();u.useEffect(()=>{window.scrollTo(0,0)},[]);const[r,i]=u.useState(null),[n,m]=u.useState({}),o=!!((E=l.state)!=null&&E.vipTable)||new URLSearchParams(l.search).get("vipTable")==="1",[j,s]=u.useState(new Set),x=(t,c,d)=>i({id:t,type:c,price:d}),N=()=>i(null),S=(t,c)=>m(d=>({...d,[t]:[...new Set([...d[t]||[],...c])]})),h=(t,c)=>{if(I.has(t))return"locked";if(o&&j.has(t))return"partial";const d=(n[t]||[]).length;return d===M?"full":d>0?"partial":c},p=(t,c)=>{if(!I.has(t)){if(o){if(c!=="vip"){alert("This offer is for VIP tables only. Please choose from rows Aâ€“E.");return}s(d=>{const v=new Set(d);return v.has(t)?v.delete(t):v.add(t),v});return}h(t,c)!=="full"&&x(t,c,c==="vip"?C.vip.price:C.generalTop.price)}},g=(t,c)=>e.jsx("div",{className:"flex flex-col items-center gap-1 xs:gap-1.5 sm:gap-3",children:t.rows.map((d,v)=>e.jsx("div",{className:"flex items-center gap-1 xs:gap-1.5 sm:gap-3",children:d.map((k,B)=>e.jsxs(_.Fragment,{children:[B===4&&e.jsx("div",{className:"w-2 xs:w-3 sm:w-6"}),k?e.jsx(z,{label:k,status:h(k,c),onClick:()=>p(k,c)}):e.jsx("div",{className:"h-9 w-9 xs:h-10 xs:w-10 sm:h-12 sm:w-12 md:h-14 md:w-14"})]},k||`${v}-${B}`))},v))}),y=u.useMemo(()=>Object.entries(n).filter(([t,c])=>!t.startsWith("__")&&Array.isArray(c)).reduce((t,[,c])=>t+c.length,0),[n]),b=j.size,w=()=>{if(o&&b>0){const c=Array.from(j).map(d=>({type:"vipTable",tableId:d,label:"VIP Table (10 seats)",price:A,qty:1}));a("/checkout",{state:{items:c}});return}const t=$(n);a("/checkout",{state:{items:t}})};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 pb-16 sm:pb-0",children:[e.jsxs("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 md:px-8",children:[e.jsxs("header",{className:"mb-4 text-center sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-extrabold text-teal-400",children:"Event Seating Plan"}),e.jsx("p",{className:"mt-1 text-xs sm:text-base text-gray-400",children:o?"Tap ANY VIP table(s) in rows Aâ€“E to add/remove them at the offer price.":"Tap a table to book specific seats."}),e.jsx("p",{className:"mt-1 text-sm sm:text-lg font-bold text-amber-400",children:o?`VIP tables selected: ${b}`:`Total Seats Booked: ${y}`})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-700 bg-gray-800/50 p-2 sm:p-6",children:[e.jsxs("div",{className:"flex w-full items-center justify-center gap-3 sm:gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-0.5 text-yellow-400",children:[e.jsx(T,{size:18,className:"sm:hidden"}),e.jsx(T,{size:22,className:"hidden sm:block"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-bold",children:"SPEAKER"})]}),e.jsx("div",{className:"rounded-lg bg-yellow-500 px-4 py-1.5 text-sm font-bold text-gray-900 shadow-lg sm:px-12 sm:py-3 sm:text-base",children:"STAGE"}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5 text-yellow-400",children:[e.jsx(T,{size:18,className:"sm:hidden"}),e.jsx(T,{size:22,className:"hidden sm:block"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-bold",children:"SPEAKER"})]})]}),e.jsx("div",{className:"mx-auto mt-3 rounded-lg bg-yellow-400 px-8 py-2 text-center text-sm font-bold text-gray-800 shadow sm:mt-4 md:w-max md:px-20 md:py-4",children:"DANCING FLOOR"}),e.jsxs("div",{className:"my-3 flex flex-wrap items-center justify-center gap-3 rounded-lg border border-gray-700 bg-gray-900/50 p-2 text-[11px] sm:my-6 sm:gap-6 sm:p-3 sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-green-600"}),"VIP"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-blue-600"}),"General"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-600"}),"Selected"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-red-700"}),"Full"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-gray-700"}),"Reserved"]})]}),e.jsx("div",{className:"relative -mx-2 sm:mx-0",children:e.jsx("div",{className:"overflow-x-auto px-2 pb-2",children:e.jsx("div",{className:"min-w-[480px] sm:min-w-0",children:e.jsxs("div",{className:"mt-2 flex w-full flex-col items-center gap-3 sm:gap-8",children:[g(C.vip,"vip"),e.jsx("div",{className:"my-1 h-px w-full bg-gray-600"}),g(C.generalTop,"general"),e.jsx("div",{className:"my-1 h-px w-full bg-gray-600"}),g(C.generalBottom,"general")]})})})})]}),o?e.jsx(W,{tablesSelectedCount:b,onContinue:w}):e.jsx(U,{bookedSeats:n,onContinue:w})]}),e.jsx(G,{}),e.jsx(X,{totalUnits:o?b:y,label:o?b===1?"table selected":"tables selected":y===1?"seat selected":"seats selected",onContinue:w,disabled:o?b===0:y===0}),!o&&r&&e.jsx(q,{table:r,bookedSeats:n[r.id]||[],onClose:N,onConfirm:S})]})}export{ae as default};
